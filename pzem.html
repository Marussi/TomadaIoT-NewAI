<!DOCTYPE html>
<html>
    <head>

<title>Monitoramento da Tomada IOT</title>

<style>

*{
  background: #295872;
}

.Itens{

  text-align: center;
 position: fixed;
  
  transform: translateY(-15%) translateX(210%);
  margin:0;
  background-color: rgb(171, 192, 236);
  width: 250px;
  border-radius: 30px;

}

.Tens{
  text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;

}
.Corr{
  text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;
}
.Pot{
  text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;
}
.KW{
  text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;
}
.Gast{
  text-align: center;
  
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 40px;
  width: 150px;
  

 
}
.Gasto{
  background-color: rgb(162, 197, 229);
  font-weight: bold;
 font-family: Sans MS, Comic Sans, cursive;
}

.itemg{

position: relative;
transform: translateY(250%) translateX(500%);
text-align: center;
width: 200px;
background-color: rgb(162, 197, 229);
text-align: center;
border-radius: 20px;
}

.Freq{
  text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;
}
.Fator{
  text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;
}

.Moni{
  background-color:rgb(171, 192, 236); 
  position: relative;
  width: 250px;
  border-radius: 250px;
  font-family: Garamond;
  font-weight: bold;
  
}

.Tensao{
  background-color:rgb(171, 192, 236);
  font-family:  MS, Comic Sans, cursive;
  font-weight: bold;
}
.Corrente{
  background-color:rgb(171, 192, 236);
  font-family:  MS, Comic Sans, cursive;
  font-weight: bold;
}
.Potencia{
  background-color:rgb(171, 192, 236);
  font-family:  MS, Comic Sans, cursive;
  font-weight: bold;
}
.KWH{
  background-color:rgb(171, 192, 236);
  font-family:  MS, Comic Sans, cursive;
  font-weight: bold;
}
.Frequencia{
  background-color:rgb(171, 192, 236);
  font-family:  MS, Comic Sans, cursive;
  font-weight: bold;
}
.FatordePotecia{
  background-color:rgb(171, 192, 236);
  font-family:  MS, Comic Sans, cursive;
  font-weight: bold;

}
input[type="text"] {
      font-family: MS, Comic Sans, cursive;
     
      color:black;
      text-align: center;
  border: none;
  font-weight: bold;
  background-color: white;
  border-radius: 12.5px;
  height: 32px;
      
      /* Outros estilos que você deseja aplicar */
    }
    .a{
      font-weight: bold;
      background-color:rgb(171, 192, 236);
      font-family: MS, Comic Sans, cursive;
    }
    .b{
      font-weight: bold;
      background-color:rgb(171, 192, 236);
      font-family: MS, Comic Sans, cursive;
    }
    .c{
      font-weight: bold;
      background-color:rgb(171, 192, 236);
      font-family: MS, Comic Sans, cursive;
    }
    .d{
      font-weight: bold;
      background-color:rgb(171, 192, 236);
      font-family: MS, Comic Sans, cursive;
    }
    .e{
      font-weight: bold;
      background-color:rgb(171, 192, 236);
      font-family: MS, Comic Sans, cursive;
    }
    .f{
      font-weight: bold;
      background-color:rgb(171, 192, 236);
      font-family: MS, Comic Sans, cursive;
    }

    
</style>


</head>
<body>
<nav class = "itemg">
  <label class = "Gasto">Gasto</label> <br><br><input class= "Gast" id = "gasto" type="text" ><label class="e">R$</label><br><br>
</nav>
  <div class="Itens">
    <p class =  "Moni">Monitoramento do IOT</p>
  <label class="Tensao">Tensão</label> <br><br> <input class = "Tens" id = "Secbox" type="text" ><label class="a">V</label><br><br>
  <label class="Corrente">Corrente</label> <br><br> <input class= "Corr" id = "Rollbox" type="text" ><label class="b">A</label><br><br>
  <label class = "Potencia">Potência</label> <br><br> <input class= "Pot" id = "Esp" type="text" ><label class="c">W</label><br><br>
  <label class = "KWH">Energia</label> <br><br><input class= "KW" id = "KwH" type="text" ><label class="d">kwh</label><br><br>
  
  <label class ="Frequencia">Frequência</label> <br><br><input class= "Freq" id = "frequência" type="text"><label class="f">Hz</label> <br><br>
  <label class = "FatordePotecia">Fator de Potência</label><nr><br> <input class= "Fator" id="FatorP" type = "text"> <br><br>
  </div>

  <div style="width: 400px; height: 400px;">
    <canvas id="myChart" style="width: 50px; height: 50px;"></canvas>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  <script>
    const ctx = document.getElementById('myChart');
  
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Junho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
        datasets: [{
          label: 'Gasto Mensal em Reais',
          data: [0.07, 0, 0, 0, 0, 0],
          borderWidth: 1,
          
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>

  <script type="module">
    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-analytics.js";
    
    
    const firebaseConfig = {
      apiKey: "AIzaSyCiWzUN_YGfA6ZN-NzaQM0ruJxawyDCpTU",
      authDomain: "tomada-iot-inteligente.firebaseapp.com",
      databaseURL: "https://tomada-iot-inteligente-default-rtdb.firebaseio.com",
      projectId: "tomada-iot-inteligente",
      storageBucket: "tomada-iot-inteligente.appspot.com",
      messagingSenderId: "440040942459",
      appId: "1:440040942459:web:6e9669f32da9c9d5866bde",
      measurementId: "G-GG8LNC0FVQ"
    };
    
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getDatabase();
    

   

    

    import{ getDatabase, get, child, update, onValue, ref, remove, set} from "https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js";
   
    

    
    var secbox = document.getElementById("Secbox");
    var rollbox = document.getElementById("Rollbox");
    var esp = document.getElementById("Esp");
    var kwh = document.getElementById("KwH");
    var gasto = document.getElementById("gasto");
    var frequencia = document.getElementById("frequência");
    var FatorP = document.getElementById("FatorP");

   // var botao = document.getElementById("meuBotao");
    var botao2 = document.getElementById("meuBotao2");
    var botao = document.getElementById("meuBotao");
   
    

    
  
 

    
    function ReceberDados(){

      setInterval(function(){

      const dbref = ref(db);

      get(child(dbref, "Tomada IOT/")).then((snapshot)=>{
        if(snapshot.exists()){
          secbox.value = snapshot.val().Tensão;
          rollbox.value = snapshot.val().Corrente;
          esp.value =snapshot.val().Potência.toPrecision(4);
          kwh.value = snapshot.val().kWh;
          gasto.value = snapshot.val().Custo.toPrecision(2);
          frequencia.value = snapshot.val().Frequência;
          FatorP.value = snapshot.val().FatorPotência;

          
          
    }})
  }, 500);
    }
  

  document.addEventListener('DOMContentLoaded', function() {
ReceberDados();
  });
    

    function InsertData(){
            set(ref(db, "Tomada IOT/"),{
              Tensão: secbox.value,
              Corrente: rollbox.value,
              Potência: esp.value,
              kWh: kwh.value,
              Custo: gasto.value,
              Frequência: frequencia.value,
              FatorPotência: FatorP.value
            })

            
          }
        
//botao.addEventListener("click", InsertData);
/*botao2.addEventListener("click", ReceberDados);*/
/*botao.addEventListener("click", InsertData);*/
      

      
  
  </script>
</body>

</html>
